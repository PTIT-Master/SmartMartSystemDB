<style>
.table-container {
    max-height: 400px;
    overflow-y: auto;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
}

.table-container table {
    margin: 0;
    border: none;
}

.table-container thead th {
    position: sticky;
    top: 0;
    background: #f8f9fa;
    z-index: 10;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.card-subtitle {
    font-size: 0.875rem;
    color: #6c757d;
    margin-bottom: 1rem;
    font-style: italic;
}

.badge {
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    font-weight: 500;
}

.badge-success { background-color: #d4edda; color: #155724; }
.badge-warning { background-color: #fff3cd; color: #856404; }
.badge-danger { background-color: #f8d7da; color: #721c24; }

.row { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
.col { flex: 1; }

@media (max-width: 768px) {
    .row { flex-direction: column; }
    .table-container { max-height: 300px; }
}
</style>
<h1>H·ªá th·ªëng qu·∫£n l√Ω si√™u th·ªã</h1>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{.TotalProducts}}</div>
        <div class="stat-label">S·∫£n ph·∫©m</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{.TotalEmployees}}</div>
        <div class="stat-label">Nh√¢n vi√™n</div>
        <div class="mt-2">
            <a href="/employees" class="btn btn-sm btn-primary">Danh s√°ch</a>
            <a href="/employees/work-hours" class="btn btn-sm btn-outline-secondary">Ch·∫•m c√¥ng</a>
            <a href="/employees/salary" class="btn btn-sm btn-outline-secondary">B·∫£ng l∆∞∆°ng</a>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{.TotalCustomers}}</div>
        <div class="stat-label">Kh√°ch h√†ng</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{formatCurrency .TodayRevenue}}</div>
        <div class="stat-label">Doanh thu h√¥m nay</div>
    </div>
</div>

<!-- Row 1: Low Shelf Products & Warehouse Empty Products -->
<div class="row">
    <div class="col">
        <div class="card">
            <div class="card-header">üîÑ C·∫ßn b·ªï sung l√™n k·ªá</div>
            <div class="card-subtitle">S·∫£n ph·∫©m s·∫Øp h·∫øt tr√™n qu·∫ßy (nh∆∞ng c√≤n h√†ng trong kho)</div>
            <div class="table-container">
                <table>
                <thead>
                    <tr>
                        <th>M√£ SP</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>SL Qu·∫ßy</th>
                        <th>SL Kho</th>
                        <th>% ƒêi·ªÅn</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .LowShelfProducts}}
                    <tr>
                        <td><code>{{.Code}}</code></td>
                        <td>{{.Name}}</td>
                        <td><span class="badge badge-warning">{{.ShelfQty}}</span></td>
                        <td><span class="badge badge-success">{{.WarehouseQty}}</span></td>
                        <td>{{printf "%.1f%%" .FillPercentage}}</td>
                        <td>
                            <a href="/inventory/transfer?product={{.ID}}" class="btn btn-sm btn-warning">Chuy·ªÉn h√†ng</a>
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="6" style="text-align: center;">‚úÖ T·∫•t c·∫£ s·∫£n ph·∫©m tr√™n k·ªá ƒë·ªÅu ƒë·ªß</td>
                    </tr>
                    {{end}}
                </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="col">
        <div class="card">
            <div class="card-header">üö® C·∫ßn nh·∫≠p kho</div>
            <div class="card-subtitle">S·∫£n ph·∫©m h·∫øt kho nh∆∞ng c√≤n tr√™n qu·∫ßy</div>
            <div class="table-container">
                <table>
                <thead>
                    <tr>
                        <th>M√£ SP</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>Danh m·ª•c</th>
                        <th>SL Qu·∫ßy</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .WarehouseEmptyProducts}}
                    <tr>
                        <td><code>{{.Code}}</code></td>
                        <td>{{.Name}}</td>
                        <td><span class="badge">{{.CategoryName}}</span></td>
                        <td><span class="badge badge-danger">{{.ShelfQty}}</span></td>
                        <td>
                            <a href="/purchase-orders/create?product={{.ID}}" class="btn btn-sm btn-danger">ƒê·∫∑t h√†ng</a>
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="5" style="text-align: center;">‚úÖ T·∫•t c·∫£ s·∫£n ph·∫©m ƒë·ªÅu c√≤n trong kho</td>
                    </tr>
                    {{end}}
                </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Row 2: Expiring Products & Expired Products -->
<div class="row">
    <div class="col">
        <div class="card">
            <div class="card-header">‚è∞ S·∫£n ph·∫©m s·∫Øp h·∫øt h·∫°n</div>
            <div class="table-container">
                <table>
                <thead>
                    <tr>
                        <th>M√£ SP</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>Ng√†y h·∫øt h·∫°n</th>
                        <th>C√≤n l·∫°i</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .ExpiringProducts}}
                    <tr>
                        <td><code>{{.Code}}</code></td>
                        <td>{{.Name}}</td>
                        <td>{{.ExpiryDate}}</td>
                        <td>
                            {{if le .DaysRemaining 3}}
                                <span class="badge badge-danger">{{.DaysRemaining}} ng√†y</span>
                            {{else if le .DaysRemaining 7}}
                                <span class="badge badge-warning">{{.DaysRemaining}} ng√†y</span>
                            {{else}}
                                <span class="badge">{{.DaysRemaining}} ng√†y</span>
                            {{end}}
                        </td>
                        <td>
                            <a href="/products/{{.ID}}/discount" class="btn btn-sm btn-warning">Gi·∫£m gi√°</a>
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="5" style="text-align: center;">‚úÖ Kh√¥ng c√≥ s·∫£n ph·∫©m s·∫Øp h·∫øt h·∫°n</td>
                    </tr>
                    {{end}}
                </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="col">
        <div class="card">
            <div class="card-header">‚ö†Ô∏è S·∫£n ph·∫©m ƒë√£ h·∫øt h·∫°n</div>
            <div class="table-container">
                <table>
                <thead>
                    <tr>
                        <th>M√£ SP</th>
                        <th>T√™n s·∫£n ph·∫©m</th>
                        <th>Ng√†y h·∫øt h·∫°n</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    {{range .ExpiredProducts}}
                    <tr>
                        <td><code>{{.Code}}</code></td>
                        <td>{{.Name}}</td>
                        <td>{{.ExpiryDate}}</td>
                        <td>
                            <span class="badge badge-danger">H·∫øt h·∫°n {{.DaysRemaining}} ng√†y</span>
                        </td>
                        <td>
                            <a href="/products/{{.ID}}/remove" class="btn btn-sm btn-danger">Lo·∫°i b·ªè</a>
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="5" style="text-align: center;">‚úÖ Kh√¥ng c√≥ s·∫£n ph·∫©m h·∫øt h·∫°n</td>
                    </tr>
                    {{end}}
                </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</div>
    <table>
        <thead>
            <tr>
                <th>Th·ªùi gian</th>
                <th>Lo·∫°i</th>
                <th>M√¥ t·∫£</th>
                <th>Ng∆∞·ªùi th·ª±c hi·ªán</th>
            </tr>
        </thead>
        <tbody>
            {{range .RecentActivities}}
            <tr>
                <td>{{.Timestamp}}</td>
                <td>{{.Type}}</td>
                <td>{{.Description}}</td>
                <td>{{.User}}</td>
            </tr>
            {{else}}
            <tr>
                <td colspan="4" style="text-align: center;">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>
